

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Train robot - supervised vision &mdash; mygym 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/mygym_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Train a robot - unsupervised vision" href="train_vae.html" />
    <link rel="prev" title="Edit config file" href="tutorial_config.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> mygym
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">How to</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualize workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_training.html">Train a robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_parametric.html">Set parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_config.html">Edit config file</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Train robot - supervised vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="train_vae.html">Train a robot - unsupervised vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel_training.html">Train in parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="tensorboard.html">Evaluate with tensorboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_model.html">Test trained model</a></li>
</ul>
<p class="caption"><span class="caption-text">How to - advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="write_reward.html">Create custom reward</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_workspace.html">Create custom workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_network.html">Create custom network</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataset.html">Generate dataset</a></li>
</ul>
<p class="caption"><span class="caption-text">Gym</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../environments/workspace.html">Workspaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/mygym_objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/mygym_robots.html">Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/gym_env.html">GymEnv</a></li>
</ul>
<p class="caption"><span class="caption-text">Baselines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../baselines/table.html">Baseline networks</a></li>
</ul>
<p class="caption"><span class="caption-text">Important classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core_modules/base_env.html">BaseEnv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_modules/robot.html">Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_modules/task.html">Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_modules/reward.html">Reward</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_modules/vision.html">Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other/camera.html">Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other/env_object.html">Object</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">mygym</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Train robot - supervised vision</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user_guide/train_camera.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="train-robot-supervised-vision">
<span id="train-camera"></span><h1>Train robot - supervised vision<a class="headerlink" href="#train-robot-supervised-vision" title="Permalink to this headline">¶</a></h1>
<p>MyGym enables you to use pre-trained vision models to extend the versatility of your training scenarios.
Each workspace has five virtual cameras, that observe the scene. You can use images from a camera
and pretrained YOLACT model to do image segmentation. This way you retrieve information about
position of robot and task objects using camera images instead of using ground truth. The reward for
training will be calculated based on data returned by vision.</p>
<div class="figure align-default">
<img alt="training yolact" src="../_images/kuka_yolact.gif" />
</div>
<p>To train a robot using image segmentation set in the config file:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;reward_type&quot;:</span> <span class="pre">&quot;3dvs&quot;,</span></code></p>
<p>and specify the path to YOLACT preptrained model and model config:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;yolact_path&quot;:&quot;trained_models/weights_yolact_mygym_23/crow_base_15_266666.pth&quot;,</span></code>
<code class="docutils literal notranslate"><span class="pre">&quot;yolact_config&quot;:&quot;trained_models/weights_yolact_mygym_23/config_train_15.obj&quot;,</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you do not have myGym’s pretrained vision model, download it first:</p>
<p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">myGym</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">download_vision.sh</span></code></p>
</div>
<p>We recommed to turn the visgym parameter off:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;visgym&quot;:</span> <span class="pre">0&quot;,</span></code></p>
<p>You can visualize how the vision performs:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;visualize&quot;:1,</span></code></p>
<p>Start the training with this modified config file:</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">train.py</span> <span class="pre">--config</span> <span class="pre">my_config.json</span></code></p>
<p>Alternatively, you can specify the above parameters in the command line:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">train</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">reward_type</span><span class="o">=</span><span class="mi">3</span><span class="n">dvs</span>
<span class="o">--</span><span class="n">yolact_path</span><span class="o">=</span><span class="n">trained_models</span><span class="o">/</span><span class="n">weights_yolact_mygym_23</span><span class="o">/</span><span class="n">crow_base_15_266666</span><span class="o">.</span><span class="n">pth</span>
<span class="o">--</span><span class="n">yolact_config</span><span class="o">=</span><span class="n">trained_models</span><span class="o">/</span><span class="n">weights_yolact_mygym_23</span><span class="o">/</span><span class="n">config_train_15</span><span class="o">.</span><span class="n">obj</span>
<span class="o">--</span><span class="n">visgym</span><span class="o">=</span><span class="mi">0</span> <span class="o">--</span><span class="n">visualize</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>After the training finishes, find your model in the logdir.</p>
<p>To learn more about myGym’s vision models, see <a class="reference internal" href="../core_modules/vision.html#vision"><span class="std std-ref">Vision</span></a>.</p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="train_vae.html" class="btn btn-neutral float-right" title="Train a robot - unsupervised vision" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="tutorial_config.html" class="btn btn-neutral float-left" title="Edit config file" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Nikita Sokovnin.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>