

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Reward &mdash; mygym 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/mygym_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Vision" href="vision.html" />
    <link rel="prev" title="Task" href="task.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> mygym
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">How to</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/visualization.html">Visualize workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/basic_training.html">Train a robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/tutorial_parametric.html">Set parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/tutorial_config.html">Edit config file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/train_camera.html">Train robot - supervised vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/train_vae.html">Train a robot - unsupervised vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/parallel_training.html">Train in parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/tensorboard.html">Evaluate with tensorboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/test_model.html">Test trained model</a></li>
</ul>
<p class="caption"><span class="caption-text">How to - advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/write_reward.html">Create custom reward</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/create_workspace.html">Create custom workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/create_network.html">Create custom network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/dataset.html">Generate dataset</a></li>
</ul>
<p class="caption"><span class="caption-text">Gym</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../environments/workspace.html">Workspaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/mygym_objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/mygym_robots.html">Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments/gym_env.html">GymEnv</a></li>
</ul>
<p class="caption"><span class="caption-text">Baselines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../baselines/table.html">Baseline networks</a></li>
</ul>
<p class="caption"><span class="caption-text">Important classes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="base_env.html">BaseEnv</a></li>
<li class="toctree-l1"><a class="reference internal" href="robot.html">Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="task.html">Task</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reward</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision.html">Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other/camera.html">Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other/env_object.html">Object</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">mygym</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Reward</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/core_modules/reward.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reward">
<span id="reward-class"></span><h1>Reward<a class="headerlink" href="#reward" title="Permalink to this headline">¶</a></h1>
<p>Reward is the key element in Reinforcement Learning. Each training, an instance of reward class is created and serves for reward signal generation during training steps. In myGym Reward Module there are three basic types of reward signal implemented: <strong>Distance</strong>, <strong>Complex Distance</strong> and <strong>Sparse</strong>. You can choose on of them to be used in training by specifying <strong>reward=</strong> eiher <strong>distance</strong>, <strong>complex_distance</strong> or <strong>sparse</strong> in <em>config file</em> or pass it as a command line argument.</p>
<span class="target" id="module-myGym.envs.rewards"></span><dl class="py class">
<dt id="myGym.envs.rewards.Reward">
<em class="property">class </em><code class="sig-prename descclassname">myGym.envs.rewards.</code><code class="sig-name descname">Reward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">task</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#Reward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.Reward" title="Permalink to this definition">¶</a></dt>
<dd><p>Reward base class for reward signal calculation and visualization</p>
<dl class="simple">
<dt>Parameters:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param env</dt>
<dd class="field-odd"><p>(object) Environment, where the training takes place</p>
</dd>
<dt class="field-even">param task</dt>
<dd class="field-even"><p>(object) Task that is being trained, instance of a class TaskModule</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="myGym.envs.rewards.Reward.visualize_reward_over_steps">
<code class="sig-name descname">visualize_reward_over_steps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#Reward.visualize_reward_over_steps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.Reward.visualize_reward_over_steps" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot and save a graph of reward values assigned to individual steps during an episode. Call this method after the end of the episode.</p>
</dd></dl>

<dl class="py method">
<dt id="myGym.envs.rewards.Reward.visualize_reward_over_episodes">
<code class="sig-name descname">visualize_reward_over_episodes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#Reward.visualize_reward_over_episodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.Reward.visualize_reward_over_episodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot and save a graph of cumulative reward values assigned to individual episodes. Call this method to plot data from the current and all previous episodes.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="myGym.envs.rewards.DistanceReward">
<em class="property">class </em><code class="sig-prename descclassname">myGym.envs.rewards.</code><code class="sig-name descname">DistanceReward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">task</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#DistanceReward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.DistanceReward" title="Permalink to this definition">¶</a></dt>
<dd><p>Reward class for reward signal calculation based on distance differences between 2 objects</p>
<dl class="simple">
<dt>Parameters:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param env</dt>
<dd class="field-odd"><p>(object) Environment, where the training takes place</p>
</dd>
<dt class="field-even">param task</dt>
<dd class="field-even"><p>(object) Task that is being trained, instance of a class TaskModule</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="myGym.envs.rewards.DistanceReward.compute">
<code class="sig-name descname">compute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">observation</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#DistanceReward.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.DistanceReward.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute reward signal based on distance between 2 objects. The position of the objects must be present in observation.</p>
<dl class="simple">
<dt>Params:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param observation</dt>
<dd class="field-odd"><p>(list) Observation of the environment</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">return reward</dt>
<dd class="field-odd"><p>(float) Reward signal for the environment</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="myGym.envs.rewards.DistanceReward.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#DistanceReward.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.DistanceReward.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset stored value of distance between 2 objects. Call this after the end of an episode.</p>
</dd></dl>

<dl class="py method">
<dt id="myGym.envs.rewards.DistanceReward.calc_dist_diff">
<code class="sig-name descname">calc_dist_diff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1_position</span></em>, <em class="sig-param"><span class="n">obj2_position</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#DistanceReward.calc_dist_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.DistanceReward.calc_dist_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate change in the distance between 2 objects in previous and in current step. Normalize the change by the value of distance in previous step.</p>
<dl class="simple">
<dt>Params:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param obj1_position</dt>
<dd class="field-odd"><p>(list) Position of the first object</p>
</dd>
<dt class="field-even">param obj2_position</dt>
<dd class="field-even"><p>(list) Position of the second object</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">return norm_diff</dt>
<dd class="field-odd"><p>(float) Normalized difference of distances between 2 objects in previsous and in current step</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="myGym.envs.rewards.ComplexDistanceReward">
<em class="property">class </em><code class="sig-prename descclassname">myGym.envs.rewards.</code><code class="sig-name descname">ComplexDistanceReward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">task</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#ComplexDistanceReward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.ComplexDistanceReward" title="Permalink to this definition">¶</a></dt>
<dd><p>Reward class for reward signal calculation based on distance differences between 3 objects, e.g. 2 objects and gripper for complex tasks</p>
<dl class="simple">
<dt>Parameters:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param env</dt>
<dd class="field-odd"><p>(object) Environment, where the training takes place</p>
</dd>
<dt class="field-even">param task</dt>
<dd class="field-even"><p>(object) Task that is being trained, instance of a class TaskModule</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="myGym.envs.rewards.ComplexDistanceReward.compute">
<code class="sig-name descname">compute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">observation</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#ComplexDistanceReward.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.ComplexDistanceReward.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute reward signal based on distances between 3 objects. The position of the objects must be present in observation.</p>
<dl class="simple">
<dt>Params:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param observation</dt>
<dd class="field-odd"><p>(list) Observation of the environment</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">return reward</dt>
<dd class="field-odd"><p>(float) Reward signal for the environment</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="myGym.envs.rewards.ComplexDistanceReward.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#ComplexDistanceReward.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.ComplexDistanceReward.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset stored value of distance between 2 objects. Call this after the end of an episode.</p>
</dd></dl>

<dl class="py method">
<dt id="myGym.envs.rewards.ComplexDistanceReward.calc_dist_diff">
<code class="sig-name descname">calc_dist_diff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1_position</span></em>, <em class="sig-param"><span class="n">obj2_position</span></em>, <em class="sig-param"><span class="n">obj3_position</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#ComplexDistanceReward.calc_dist_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.ComplexDistanceReward.calc_dist_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate change in the distances between 3 objects in previous and in current step. Normalize the change by the value of distance in previous step.</p>
<dl class="simple">
<dt>Params:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param obj1_position</dt>
<dd class="field-odd"><p>(list) Position of the first object</p>
</dd>
<dt class="field-even">param obj2_position</dt>
<dd class="field-even"><p>(list) Position of the second object</p>
</dd>
<dt class="field-odd">param obj3_position</dt>
<dd class="field-odd"><p>(list) Position of the third object</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">return norm_diff</dt>
<dd class="field-odd"><p>(float) Sum of normalized differences of distances between 3 objects in previsous and in current step</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="myGym.envs.rewards.SparseReward">
<em class="property">class </em><code class="sig-prename descclassname">myGym.envs.rewards.</code><code class="sig-name descname">SparseReward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">task</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#SparseReward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.SparseReward" title="Permalink to this definition">¶</a></dt>
<dd><p>Reward class for sparse reward signal</p>
<dl class="simple">
<dt>Parameters:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param env</dt>
<dd class="field-odd"><p>(object) Environment, where the training takes place</p>
</dd>
<dt class="field-even">param task</dt>
<dd class="field-even"><p>(object) Task that is being trained, instance of a class TaskModule</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="myGym.envs.rewards.SparseReward.compute">
<code class="sig-name descname">compute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">observation</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/myGym/envs/rewards.html#SparseReward.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#myGym.envs.rewards.SparseReward.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute sparse reward signal. Reward is 0 when goal is reached, -1 in every other step.</p>
<dl class="simple">
<dt>Params:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param observation</dt>
<dd class="field-odd"><p>Ignored</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">return reward</dt>
<dd class="field-odd"><p>(float) Reward signal for the environment</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="vision.html" class="btn btn-neutral float-right" title="Vision" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="task.html" class="btn btn-neutral float-left" title="Task" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Nikita Sokovnin.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>